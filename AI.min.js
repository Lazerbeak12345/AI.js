!function(t,s){"undefined"!=typeof module?module.exports=s:t.Ai=s}(this,function(){function t(t,s){s=s&&s.toLowerCase()
for(var e="",i=0,o="a"==s?10:0,r="n"==s?10:62;i++<Math.ceil(t);){var h=Math.random()*(r-o)+o<<0
e+=String.fromCharCode(h+=h>9?36>h?55:61:48)}return e}function s(s){var e,i="",o=0,r=0,h=0,n=0,d="",a="",f=0
for(r=s.length;r>=3;r--)for(i=a=t(r,"an"),h=0;h<s.length-r;h++)if(d=s.substr(h,r),void 0===this.words[r]&&(this.words[r]={}),void 0===this.context[r]&&(this.context[r]={}),void 0===this.words[r][d]&&(this.words[r][d]=0),void 0===this.context[r][d]&&(this.context[r][d]={before:[s.substr(0,h)],after:[s.slice(h+r)]}),this.words[r][d]<0){for(n in this.context[r][d].before)e=this.context[r][d].before[n],e.length<1&&(e=t(3,"an")),void 0===this.words[e.length]&&(this.words[e.length]={}),void 0===this.words[e.length][d]&&(this.words[e.length][e]=0),this.words[e.length][e]>=o&&(o=this.words[e.length][e],i=e)
for(n in this.context[i.length][i].after)e=this.context[i.length][i].after[n],e.length<1&&(e=t(3,"an")),void 0===this.words[e.length]&&(this.words[e.length]={}),void 0===this.words[e.length][d]&&(this.words[e.length][e]=0),this.words[e.length][e]>=f&&(f=this.words[e.length][e],a=e)
s=""+s.substr(0,h)+a+s.slice(h+r)}return s}var e=function(e,i){if(0===arguments.length||arguments.length>2)throw"The Ai constructor requires 1-2 values passed"
if(i=i||{},this.name=e,this.defaultResponces={"How are you?":"If you got this message, I am at least 25% operational."},this.lastResponce="",this.words=[],this.context=[],this.inputTypes={string:function(t){return t}},void 0!==i)for(var o in this)if(void 0!==this[o])for(var r in i[o])this[o][r]=i[o][r]
else this[o]=i[o]
this.reactTo=function(e,i){var o,r,h,n=t(Math.random()*this.lastResponce.length)
if(i=i||typeof e,void 0===this.inputTypes[i])throw"Invalid type"
for(e=this.inputTypes[i](e),this.defaultResponces.hasOwnProperty(e)&&(n=this.defaultResponces[e]),n=s.call(this,n),this.defaultResponces[e]=n,this.lastResponce=n,o=1;o<n.length;o++)for(this.words[o]||(this.words[o]={},this.context[o]={}),r=0;r<n.length-o;r++)h=n.substr(r,o),this.words[o][h]?(this.context[o][h].before.push(n.substr(r-o,o)),this.context[o][h].after.push(n.substr(r+o,o))):(this.words[o][h]=0,this.context[o][h]={before:[n.substr(r-o,o)],after:[n.substr(r+o,o)]})
return this.lastResponce=n,n},this.punish=function(t){void 0===t&&(t=this.lastResponce)
for(var s=1;s<t.length;s++){void 0===this.words[s]&&(this.words[s]={})
for(var e=0;e<t.length-s;e++){var i=t.substr(e,s)
this.words[s][i]?this.words[s][i]--:this.words[s][i]=0}}},this.reward=function(t){void 0===t&&(t=this.lastResponce)
for(var s=1;s<t.length;s++){void 0===this.words[s]&&(this.words[s]={})
for(var e=0;e<t.length-s;e++){var i=t.substr(e,s)
this.words[s][i]?this.words[s][i]++:this.words[s][i]=0}}}}
return e}())
